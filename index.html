const scratchOff = document.querySelector('.scratch-off');
let isScratching = false;

scratchOff.addEventListener('mousedown', startScratching);
scratchOff.addEventListener('touchstart', startScratching);

function startScratching() {
    isScratching = true;
    scratchOff.style.mixBlendMode = 'multiply';
}

document.addEventListener('mouseup', stopScratching);
document.addEventListener('touchend', stopScratching);

function stopScratching() {
    isScratching = false;
    scratchOff.style.mixBlendMode = 'transparent';
}

scratchOff.addEventListener('mousemove', scratch);
scratchOff.addEventListener('touchmove', scratch);

function scratch(e) {
    if (isScratching) {
        const bounds = scratchOff.getBoundingClientRect();
        const xPos = e.clientX - bounds.left;
        const yPos = e.clientY - bounds.top;

        scratchOff.style.background = 'transparent';
        scratchOff.style.display = 'none';
        setTimeout(() => {
            scratchOff.style.display = 'block';
        }, 0);
    }
}
